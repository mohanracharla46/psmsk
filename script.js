const translations = {
    en: {
        temple_name: "Palnadu Sri Maha Saiva Kshetram",
        nav_home: "Home",
        nav_about: "About",
        nav_history: "History",
        nav_darshan: "Darshan",
        nav_sevas: "Sevas",
        nav_festivals: "Festivals",
        nav_gallery: "Gallery",
        nav_donations: "Donations",
        nav_contact: "Contact",
        hero_welcome: "Palnadu Sri Maha Saiva Kshetram",
        hero_subtitle: "Experience Peace, Spirituality, and Tradition",
        btn_view_timings: "View Darshan Timings",
        section_about: "About the Temple",
        about_title: "Development of Palnadu Sri Maha Saiva Kshetram",
        about_p1: "In the 11th century, at Jittagamalapadu village on the banks of the Naguleru river, Nayakurala Nagamma constructed the Sri Chennamallikarjuna Swamy Temple along with several sub-temples, with Goddess Parvati as the consort.",
        about_p2: "With the initiation of restoration works, the temple was re-consecrated with an Emerald Lingam on 16-03-2025, and daily rituals are being performed. The unique feature of this temple is that the sun rays directly fall on the Shiva Lingam during sunrise.",
        about_p3: "As part of developing this sacred place into a Maha Saiva Kshetram, the following are being constructed:",
        project_1: "Rajarajeshwara Swamy Temple with Goddess Maharaja Rajeshwari",
        project_2: "Goshala (cow shelter)",
        project_3: "Veda Pathashala (Vedic school)",
        project_4: "Old age orphanage",
        project_5: "Museum showcasing the history and glory of Palnadu",
        development_text: "Plans are also underway to construct bathing ghats at Naguleru river and a wide road from the National Highway to the temple complex. The Temple Development Committee invites all devotees and the public to take part in this spiritual and cultural development.",
        section_history: "Temple History",
        history_text: "The history of this sacred shrine dates back to the 11th century when Nayakurala Nagamma, a legendary figure in Palnadu history, constructed the Sri Chennamallikarjuna Swamy Temple along with several sub-temples on the banks of the Naguleru river in Jittagamalapadu. The temple stands as a testament to the rich cultural and spiritual heritage of the Palnadu region. After centuries, significant restoration efforts were initiated, leading to the re-consecration of the temple with a magnificent Emerald Lingam on March 16, 2025. The temple is especially famous for the natural phenomenon where the first rays of the rising sun fall directly on the Shiva Lingam.",
        section_darshan: "Darshan Timings",
        table_event: "Event / Darshan",
        table_time: "Timings",
        darshan_suprabhatam: "Suprabhatam",
        darshan_sarva: "Sarva Darshanam",
        darshan_break: "Temple Break",
        darshan_evening: "Evening Darshanam",
        section_sevas: "Seva & Puja",
        seva_archana: "Archana",
        seva_archana_desc: "A personalized prayer offered with flowers.",
        seva_abhishekam: "Abhishekam",
        seva_abhishekam_desc: "Sacred bathing ceremony of the deity.",
        seva_kalyanam: "Kalyanotsavam",
        seva_kalyanam_desc: "Divine wedding ceremony.",
        section_festivals: "Festivals & Events",
        event_shivaratri: "Maha Shivaratri",
        event_shivaratri_desc: "The grandest celebration of Lord Shiva.",
        event_pradosham: "Pradosha Vratham",
        event_pradosham_desc: "Special bimonthly prayers during sunset.",
        event_karthika: "Karthika Masam",
        event_karthika_desc: "The holy month of lamps and prayers.",
        event_shravan: "Shravan Masam",
        event_shravan_desc: "Auspicious month dedicated to Lord Shiva.",
        event_masa_shivaratri: "Masa Shivaratri",
        event_masa_shivaratri_desc: "Monthly observance of Shivaratri.",
        section_gallery: "Gallery",
        section_donations: "Donations",
        donations_text: "Your contributions help us maintain the temple and continue our spiritual activities.",
        btn_donate: "Donate Now",
        section_contact: "Contact Us",
        contact_address_title: "Address",
        contact_address: "Nayakurala Nagamma Temple Premises, Gamalapadu, Dachepalli Mandal, Palnadu District.",
        contact_phone_title: "Phone",
        contact_email_title: "Email",
        btn_send: "Send Message",
        lang_toggle: "తెలుగు | English"
    },
    te: {
        temple_name: "పల్నాడు శ్రీ మహాశైవ క్షేత్రము",
        nav_home: "ప్రారంభం",
        nav_about: "గురించి",
        nav_history: "చరిత్ర",
        nav_darshan: "దర్శనం",
        nav_sevas: "సేవలు",
        nav_festivals: "పండుగలు",
        nav_gallery: "చిత్రమాలిక",
        nav_donations: "విరాళాలు",
        nav_contact: "సంప్రదించండి",
        hero_welcome: "పల్నాడు శ్రీ మహాశైవ క్షేత్రము",
        hero_subtitle: "శాంతి, ఆధ్యాత్మికత మరియు సంప్రదాయాన్ని అనుభవించండి",
        btn_view_timings: "దర్శన వేళలు చూడండి",
        section_about: "దేవస్థానం గురించి",
        about_title: "మహా శైవ క్షేత్రంగా తీర్చిదిద్దే కార్యక్రమం",
        about_p1: "11వ శతాబ్దంలో జిట్టగామాలపాడు గ్రామంలో నాగులేరు తీరాన నాయకురాలు నాగమ్మచే శ్రీ పార్వతీ దేవి సమేత చెన్న మల్లికార్జున స్వామి దేవాలయం మరియు పలు ఉప ఆలయాలు నిర్మించబడినవి.",
        about_p2: "ఈ ఆలయాలను పునరుద్ధరించేందుకు శ్రీకారం చుట్టగా, 16-03-2025న మరకత లింగంతో పునఃప్రతిష్ఠ నిర్వహించబడింది. ప్రస్తుతం నిత్య పూజా కైంకర్యాలు జరుగుతున్నాయి. ఈ ఆలయ ప్రత్యేకత ఏమిటంటే సూర్యోదయం సమయంలో సూర్యకిరణాలు నేరుగా శివలింగంపై ప్రసరించడం.",
        about_p3: "ఈ ప్రాంగణాన్ని మహా శైవ క్షేత్రంగా తీర్చిదిద్దే కార్యక్రమంలో భాగంగా:",
        project_1: "మహారాజ రాజేశ్వరి సమేత రాజరాజేశ్వర స్వామి ఆలయ నిర్మాణం",
        project_2: "గోశాల",
        project_3: "వేద పాఠశాల",
        project_4: "వృద్ధ అనాధాశ్రమం",
        project_5: "పల్నాడు చరిత్రను ప్రతిబింబించే మ్యూజియం",
        development_text: "అలాగే నాగులేరు వద్ద స్నాన ఘాట్ నిర్మాణం మరియు నేషనల్ హైవే నుండి శైవ క్షేత్రం వరకు విస్తృత రోడ్డు నిర్మాణ పనులు ప్రారంభమయ్యాయి. ఈ మహాశైవ క్షేత్ర అభివృద్ధిలో ప్రజలు, భక్తులు భాగస్వాములు కావాలని కమిటీ తరఫున ఆహ్వానిస్తున్నాము.",
        section_history: "దేవాలయ చరిత్ర",
        history_text: "ఈ పవిత్ర క్షేత్ర చరిత్ర 11వ శతాబ్దానికి చెందినది. పల్నాడు చరిత్రలో వీరనారిగా పేరుగాంచిన నాయకురాలు నాగమ్మ, జిట్టగామాలపాడులో నాగులేరు తీరాన శ్రీ పార్వతీ దేవి సమేత చెన్న మల్లికార్జున స్వామి దేవాలయంతో పాటు పలు ఉప ఆలయాలను నిర్మించారు. ఈ క్షేత్రం పల్నాడు ప్రాంతపు సాంస్కృతిక మరియు ఆధ్యాత్మిక వైభవానికి చిహ్నం. అనేక శతాబ్దాల తర్వాత, ఆలయ పునరుద్ధరణ పనులు ప్రారంభమై, 16-03-2025న అత్యంత వైభవంగా మరకత లింగ ప్రతిష్ఠ నిర్వహించబడింది. సూర్యోదయ సమయంలో సూర్యకిరణాలు నేరుగా శివలింగంపై ప్రసరించడం ఈ ఆలయ ప్రత్యేకత.",
        section_darshan: "దర్శన వేళలు",
        table_event: "కార్యక్రమం / దర్శనం",
        table_time: "సమయాలు",
        darshan_suprabhatam: "సుప్రభాతం",
        darshan_sarva: "సర్వ దర్శనం",
        darshan_break: "విరామం",
        darshan_evening: "సాయంత్రం దర్శనం",
        section_sevas: "సేవలు & పూజలు",
        seva_archana: "అర్చన",
        seva_archana_desc: "పుష్పాలతో స్వామి వారి నామస్మరణతో చేసే ప్రార్థన.",
        seva_abhishekam: "అభిషేకం",
        seva_abhishekam_desc: "పంచామృతాలతో స్వామి వారికి చేసే పవిత్ర స్నానం.",
        seva_kalyanam: "కళ్యాణోత్సవం",
        seva_kalyanam_desc: "కుటుంబానికి శాంతిని కలిగించే దివ్య వివాహ మహోత్సవం.",
        section_festivals: "పండుగలు & ఈవెంట్‌లు",
        event_shivaratri: "మహా శివరాత్రి",
        event_shivaratri_desc: "శివుని అత్యంత పవిత్రమైన వేడుక.",
        event_pradosham: "ప్రదోష వ్రతం",
        event_pradosham_desc: "సూర్యాస్తమయ సమయంలో నిర్వహించే ప్రత్యేక పూజలు.",
        event_karthika: "కార్తీక మాసం",
        event_karthika_desc: "దీపారాధనలు మరియు ప్రత్యేక ప్రార్థనల పవిత్ర మాసం.",
        event_shravan: "శ్రావణ మాసం",
        event_shravan_desc: "శివారాధనకు అత్యంత ప్రశస్తమైన మాసం.",
        event_masa_shivaratri: "మాస శివరాత్రి",
        event_masa_shivaratri_desc: "ప్రతి నెలా నిర్వహించబడే శివరాత్రి వేడుకలు.",
        section_gallery: "చిత్రమాలిక",
        section_donations: "విరాళాలు",
        donations_text: "దేవాలయ అభివృద్ధిలో మీ వంతు భాగస్వామ్యం అందించండి.",
        btn_donate: "విరాళం ఇవ్వండి",
        section_contact: "మమ్మల్ని సంప్రదించండి",
        contact_address_title: "చిరునామా",
        contact_address: "నాయకురాలు నాగమ్మ ప్రాంగణం, గామాలపాడు, దాచేపల్లి మండలం, పల్నాడు జిల్లా.",
        contact_phone_title: "ఫోన్",
        contact_email_title: "ఈమెయిల్",
        btn_send: "సందేశం పంపండి",
        lang_toggle: "English | తెలుగు"
    }
};

let currentLang = localStorage.getItem('temple_lang') || 'en';

function updateLanguage() {
    // Update HTML lang attribute
    document.documentElement.setAttribute('lang', currentLang);

    // Update all elements with data-key attribute
    const elements = document.querySelectorAll('[data-key]');
    elements.forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[currentLang][key]) {
            el.textContent = translations[currentLang][key];
        }
    });

    // Update specific ID elements
    const templeName = document.getElementById('temple-name');
    if (templeName) templeName.textContent = translations[currentLang].temple_name;

    // Update language button text
    const langBtn = document.getElementById('lang-btn');
    if (langBtn) langBtn.textContent = translations[currentLang].lang_toggle;

    // Save preference
    localStorage.setItem('temple_lang', currentLang);

    // Apply specific font styling for Telugu
    if (currentLang === 'te') {
        document.body.style.fontFamily = "'Ramabhadra', sans-serif";
    } else {
        document.body.style.fontFamily = "'Lora', serif";
    }
}

function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'te' : 'en';
    updateLanguage();
}

// Mobile Menu Toggle
const mobileMenu = document.getElementById('mobile-menu');
const navLinks = document.querySelector('.nav-links');

if (mobileMenu) {
    mobileMenu.addEventListener('click', () => {
        navLinks.classList.toggle('active');
        const icon = mobileMenu.querySelector('i');
        icon.classList.toggle('fa-bars');
        icon.classList.toggle('fa-times');
    });
}

// Close mobile menu on link click
document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
        navLinks.classList.remove('active');
        if (mobileMenu) {
            const icon = mobileMenu.querySelector('i');
            icon.classList.add('fa-bars');
            icon.classList.remove('fa-times');
        }
    });
});

// Smooth Scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            window.scrollTo({
                top: target.offsetTop - 80, // Account for sticky header
                behavior: 'smooth'
            });
        }
    });
});

// Initialize on load
document.addEventListener('DOMContentLoaded', () => {
    updateLanguage();

    // Gallery Carousel Logic
    const track = document.querySelector('.gallery-track');
    const nextBtn = document.getElementById('gallery-next');
    const prevBtn = document.getElementById('gallery-prev');
    const items = document.querySelectorAll('.gallery-item');

    if (track && items.length > 0) {
        let index = 0;

        function getVisibleItems() {
            if (window.innerWidth <= 600) return 1;
            if (window.innerWidth <= 992) return 2;
            return 3;
        }

        function updateCarousel() {
            const visibleItems = getVisibleItems();
            const width = items[0].getBoundingClientRect().width + 20; // width + gap
            track.style.transform = `translateX(-${index * width}px)`;

            // Disable buttons if at ends
            prevBtn.style.opacity = index === 0 ? '0.5' : '1';
            prevBtn.style.pointerEvents = index === 0 ? 'none' : 'auto';

            nextBtn.style.opacity = index >= items.length - visibleItems ? '0.5' : '1';
            nextBtn.style.pointerEvents = index >= items.length - visibleItems ? 'none' : 'auto';
        }

        nextBtn.addEventListener('click', () => {
            if (index < items.length - getVisibleItems()) {
                index++;
                updateLanguage(); // just to ensure no layout shift issues
                updateCarousel();
            }
        });

        prevBtn.addEventListener('click', () => {
            if (index > 0) {
                index--;
                updateCarousel();
            }
        });

        // Initialize and handle resize
        window.addEventListener('resize', updateCarousel);
        updateCarousel();

        // Autoplay
        setInterval(() => {
            if (index < items.length - getVisibleItems()) {
                index++;
            } else {
                index = 0;
            }
            updateCarousel();
        }, 5000);
    }

    // Hero Character Slider Logic
    const slides = document.querySelectorAll('.slide');
    if (slides.length > 0) {
        let currentSlide = 0;
        setInterval(() => {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }, 3500); // 3.5 seconds interval for smoother feel
    }

    // Scroll Reveal Logic
    const revealElements = document.querySelectorAll('.reveal, .reveal-left, .reveal-right, .reveal-scale');
    const revealObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('active');
            }
        });
    }, { threshold: 0.1 });

    revealElements.forEach(el => revealObserver.observe(el));

    // QR Modal Logic
    const modal = document.getElementById('qr-modal');
    const btn = document.getElementById('show-qr-btn');
    const closeBtn = document.querySelector('.close-modal');

    if (btn && modal && closeBtn) {
        btn.onclick = function () {
            modal.style.display = "flex";
            document.body.style.overflow = "hidden"; // Disable scroll
        }

        closeBtn.onclick = function () {
            modal.style.display = "none";
            document.body.style.overflow = "auto"; // Re-enable scroll
        }

        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
                document.body.style.overflow = "auto";
            }
        }
    }
});
